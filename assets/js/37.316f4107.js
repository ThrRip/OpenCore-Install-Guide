(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{358:function(t,e,a){t.exports=a.p+"assets/img/cs-stuck.bddc4a2d.jpg"},359:function(t,e,a){t.exports=a.p+"assets/img/ramrod.55591fc5.jpg"},362:function(t,e,a){t.exports=a.p+"assets/img/asus-tsc.2397797f.png"},363:function(t,e,a){t.exports=a.p+"assets/img/asus-tsc-2.029ce318.png"},550:function(t,e,a){t.exports=a.p+"assets/img/rtc.53522866.png"},551:function(t,e,a){t.exports=a.p+"assets/img/OC_catalina.c22fada9.jpg"},552:function(t,e,a){t.exports=a.p+"assets/img/cd-clock.ad48e008.jpg"},642:function(t,e,a){"use strict";a.r(e);var r=a(25),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"内核错误"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核错误"}},[t._v("#")]),t._v(" 内核错误")]),t._v(" "),r("ul",[r("li",[t._v("支持的版本：0.6.6")])]),t._v(" "),r("p",[t._v("在初次启动 "),r("strong",[t._v("macOS 安装程序")]),t._v("到"),r("strong",[t._v("出现安装器界面")]),t._v("时会出现的部分问题")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-eb-log-exitbs-start"}},[t._v("卡在 [EB|#LOG:EXITBS:START]")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-endrandomseed"}},[t._v("卡在 EndRandomSeed")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%9C%A8-opencore-%E4%B8%AD%E9%80%89%E6%8B%A9-macos-%E5%88%86%E5%8C%BA%E5%90%8E%E5%8D%A1%E4%BD%8F"}},[t._v("在 OpenCore 中选择 macOS 分区后卡住")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-invalid-frame-pointer"}},[t._v("内核崩溃：Invalid frame pointer")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%90%AF%E5%8A%A8-preboot-%E5%88%86%E5%8C%BA%E6%97%B6%E5%8D%A1%E5%9C%A8-eb-ld-ofs-err-0xe"}},[t._v("启动 Preboot 分区时卡在 [EB|LD:OFS] Err(0xE)")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-ocb-loadimage-failed-security-violation"}},[t._v("卡在 OCB: LoadImage failed - Security Violation")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-ocabc-memory-pool-allocation-failure-not-found"}},[t._v("卡在 OCABC: Memory pool allocation failure - Not Found")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-buffer-too-small"}},[t._v("卡在 Buffer Too Small")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-plist-only-kext-has-cfbundleexecutable-key"}},[t._v("卡在 Plist only kext has CFBundleExecutable key")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-this-version-of-mac-os-x-is-not-supported-reason-mac"}},[t._v("卡在 This version of Mac OS X is not supported: Reason Mac...")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#couldnt-allocate-runtime-area-%E9%94%99%E8%AF%AF"}},[t._v("Couldn't allocate runtime area 错误")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-rtc-pci-configuration-begins-previous-shutdown-hpet-hid-legacy"}},[t._v("卡在 RTC..., PCI ConfigurationBegins, Previous Shutdown..., HPET, HID: Legacy...")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#b550-%E4%B8%BB%E6%9D%BF%E5%8D%A1%E5%9C%A8-acpi-table-loading"}},[t._v("B550 主板卡在 ACPI Table loading")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#waiting-for-root-device-%E5%92%8C%E7%A6%81%E6%AD%A2%E7%AC%A6%E5%8F%B7"}},[t._v("“Waiting for root device” 和禁止符号")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#x99-%E4%B8%BB%E6%9D%BF%E5%9C%A8-iopcifamily-%E5%8F%91%E7%94%9F%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83"}},[t._v("X99 主板在 IOPCIFamily 发生内核崩溃")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-ioconsoleusers-gioscreenlock-giolockstate-3-%E6%88%96%E9%99%84%E8%BF%91"}},[t._v("卡在 IOConsoleUsers: gIOScreenLock... 或附近")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E7%AC%94%E8%AE%B0%E6%9C%AC%E8%8A%B1%E5%B1%8F%E9%97%AE%E9%A2%98"}},[t._v("笔记本花屏问题")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E9%87%87%E7%94%A8-navi-%E6%A0%B8%E5%BF%83%E7%9A%84-amd-%E6%98%BE%E5%8D%A1%E5%9C%A8%E5%87%BA%E7%8E%B0-ioconsoleusers-gioscreenlock-%E4%B9%8B%E5%90%8E%E9%BB%91%E5%B1%8F"}},[t._v("采用 Navi 核心的 AMD 显卡在出现 IOConsoleUsers: gIOScreenLock... 之后黑屏")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-cannot-perform-kext-summary"}},[t._v("内核崩溃：Cannot perform kext summary")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-appleintelmcereporter"}},[t._v("内核崩溃：AppleIntelMCEReporter")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-appleintelcpupowermanagement"}},[t._v("内核崩溃：AppleIntelCPUPowerManagement")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E7%9A%84%E9%94%AE%E7%9B%98%E5%B7%A5%E4%BD%9C%E6%AD%A3%E5%B8%B8-%E4%BD%86%E8%A7%A6%E6%8E%A7%E6%9D%BF%E6%97%A0%E6%B3%95%E5%B7%A5%E4%BD%9C"}},[t._v("笔记本电脑的键盘工作正常，但触控板无法工作")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#kextd-stall-0-appleacpicpu"}},[r("code",[t._v("kextd stall[0]: AppleACPICPU")])])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-appleinteli210ethernet"}},[t._v("内核崩溃：AppleIntelI210Ethernet")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#icelake-%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%B8%8A%E7%9A%84%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-wrong-cd-clock-frequency"}},[t._v("Icelake 笔记本上的内核崩溃：“Wrong CD Clock Frequency”")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83-cckprng-int-gen"}},[t._v("内核崩溃：“cckprng_int_gen”")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%AE%89%E8%A3%85-macos-big-sur-%E6%97%B6%E5%8D%A1%E5%9C%A8-forcing-cs-runtime-for-entitlement"}},[t._v("安装 macOS Big Sur 时卡在 Forcing CS_RUNTIME for entitlement")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-ramrod"}},[t._v("卡在 ramrod(^^^^^^^^^^^^^)")])])]),t._v(" "),r("h2",{attrs:{id:"卡在-eb-log-exitbs-start"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-eb-log-exitbs-start"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("[EB|#LOG:EXITBS:START]")])]),t._v(" "),r("p",[t._v("本章节将分为三部分进行说明，请注意:")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#booter-%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98"}},[t._v("Booter 配置问题")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#kernel-%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98"}},[t._v("Kernel 配置问题")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#uefi-%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98"}},[t._v("UEFI 配置问题")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%97%AE%E9%A2%98"}},[t._v("虚拟机问题")])])]),t._v(" "),r("h3",{attrs:{id:"booter-配置问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#booter-配置问题"}},[t._v("#")]),t._v(" Booter 配置问题")]),t._v(" "),r("p",[t._v("在 Booter 部分的主要问题是:")]),t._v(" "),r("ul",[r("li",[r("p",[r("strong",[t._v("DevirtualiseMmio")])]),t._v(" "),r("ul",[r("li",[t._v("某些特定的 MMIO 区域仍然需要正常工作，因此您需要在 "),r("code",[t._v("Booter -> MmioWhitelist")]),t._v(" 中排除这些区域，或者直接禁用这个设置项。 详情请参考: "),r("RouterLink",{attrs:{to:"/extras/kaslr-fix.html#using-devirtualisemmio"}},[t._v("如何使用 DevirtualiseMmio")])],1),t._v(" "),r("li",[t._v("对于 TRx40 用户，请启用这个设置项")]),t._v(" "),r("li",[t._v("对于 X99 用户，因为一些固件会使其失效，所以请禁用这个设置项")])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("SetupVirtualMap")])]),t._v(" "),r("ul",[r("li",[t._v("在大多数固件上都需要启用这个设置项，如果禁用它很容易会导致内核崩溃, 除了以下情况：\n"),r("ul",[r("li",[t._v("主要是 Z390 以及更早的主板需要启用这个开关")]),t._v(" "),r("li",[t._v("然而，某些固件（主要出现在 2020 年后的新产品）与该设置项不兼容，启用这个设置项反而会导致内核崩溃，如果您拥有以下机器或主板，请禁用此设置项：\n"),r("ul",[r("li",[t._v("Intel Ice Lake 架构笔记本")]),t._v(" "),r("li",[t._v("Intel Comet Lake 架构主板（B460、H470、Z490 等）")]),t._v(" "),r("li",[t._v("AMD 的 B550 和 A520（更新了最新版本的 BIOS 的 X570 主板也包括在内）\n"),r("ul",[r("li",[t._v("许多带有 2020 年底 BIOS 更新的 B450 和 X470 主板也包括在内")])])]),t._v(" "),r("li",[t._v("AMD TRx40")]),t._v(" "),r("li",[t._v("虚拟机（如：QEMU）")]),t._v(" "),r("li",[t._v("X299 2020+ BIOS 更新（2019 年末或 2020 年后发布的最新 BIOS）")])])])])])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("EnableWriteUnprotector")])]),t._v(" "),r("ul",[r("li",[t._v("另一个原因可能是 macOS 与 CR0 寄存器的写保护相冲突, 我们有两种方法来解决这个问题：\n"),r("ul",[r("li",[t._v("如果您的固件支持 MATs(主要是 2018 年后发布的固件):\n"),r("ul",[r("li",[t._v("EnableWriteUnprotector -> False")]),t._v(" "),r("li",[t._v("RebuildAppleMemoryMap -> True")]),t._v(" "),r("li",[t._v("SyncRuntimePermissions -> True")])])]),t._v(" "),r("li",[t._v("对于发布较早而不支持 MATs 的固件:\n"),r("ul",[r("li",[t._v("EnableWriteUnprotector -> True")]),t._v(" "),r("li",[t._v("RebuildAppleMemoryMap -> False")]),t._v(" "),r("li",[t._v("SyncRuntimePermissions -> False")])])]),t._v(" "),r("li",[t._v("注：一些笔记本电脑（例如：戴尔灵感 5370）即使支持 MATs 但是依然会遇到启动问题。在这种情况下，您将有两种选择：\n"),r("ul",[r("li",[t._v("像不支持 MAT 机器的情况一样处理（启用 "),r("code",[t._v("EnableWriteUnprotector")]),t._v(" 然后禁用 "),r("code",[t._v("RebuildAppleMemoryMap")]),t._v(" 和 "),r("code",[t._v("SyncRuntimePermissions")]),t._v("）")]),t._v(" "),r("li",[t._v("或启用 "),r("code",[t._v("DevirtualiseMmio")]),t._v(" 然后遵循 "),r("a",{attrs:{href:"https://dortania.github.io/OpenCore-Install-Guide/extras/kaslr-fix.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MmioWhitelist 向导"),r("OutboundLink")],1)])])])])])])])]),t._v(" "),r("p",[t._v("关于 MATs 支持：使用 EDK 2018 以后版本编译的固件会支持 MAT ，许多 OEM 甚至向 SkyLake 笔记本提供了支持 MAT 的固件。但是我们很难去知晓 OEM 是否更新了固件，您可以检查 OpenCore 日志来确定您的固件是否支持 MAT（"),r("RouterLink",{attrs:{to:"/troubleshooting/debug.html"}},[t._v("如何获取 OpenCore 调试日志")]),t._v("）：")],1),t._v(" "),r("div",{staticClass:"language-Shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[t._v("OCABC: MAT support is "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),r("ul",[r("li",[t._v("注意: 输出为 "),r("code",[t._v("1")]),t._v(" 意味着固件支持 MATs，如果是 "),r("code",[t._v("0")]),t._v(" 则意味着不支持")])]),t._v(" "),r("h3",{attrs:{id:"kernel-配置问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kernel-配置问题"}},[t._v("#")]),t._v(" Kernel 配置问题")]),t._v(" "),r("p",[t._v("本章节分为 Intel 和 AMD 部分：")]),t._v(" "),r("h4",{attrs:{id:"amd-用户"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#amd-用户"}},[t._v("#")]),t._v(" AMD 用户")]),t._v(" "),r("ul",[r("li",[t._v("缺少 "),r("a",{attrs:{href:"https://github.com/AMD-OSX/AMD_Vanilla/tree/opencore",target:"_blank",rel:"noopener noreferrer"}},[t._v("内核补丁"),r("OutboundLink")],1),t._v("(只用于 AMD CPU，确保他们是适用于 OpenCore 的补丁而不是适用于 Clover 的。Clover 使用 "),r("code",[t._v("MatchOS")]),t._v(" 而 OpenCore 使用 "),r("code",[t._v("MinKernel")]),t._v(" 和 "),r("code",[t._v("Maxkernel")]),t._v(" 来指定系统版本范围)\n"),r("ul",[r("li",[t._v("过时的内核补丁也会导致相同的问题，请确保您从 AMD OS X 获取并使用了最新的内核补丁")])])])]),t._v(" "),r("h4",{attrs:{id:"intel-用户"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#intel-用户"}},[t._v("#")]),t._v(" Intel 用户")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("AppleXcpmCfgLock")]),t._v(" 和 "),r("strong",[t._v("AppleCpuPmCfgLock")]),t._v(" "),r("ul",[r("li",[t._v("缺少 CFG 或 XCPM 补丁，请启用 "),r("code",[t._v("AppleXcpmCfgLock")]),t._v(" 和 "),r("code",[t._v("AppleCpuPmCfgLock")]),t._v(" "),r("ul",[r("li",[t._v("Haswell 及更新的架构只需要 "),r("code",[t._v("AppleXcpmCfgLock")])]),t._v(" "),r("li",[t._v("Ivy Bridge 及更旧的架构 "),r("code",[t._v("AppleCpuPmCfgLock")]),t._v(" "),r("ul",[r("li",[t._v("如果安装 10.11 或旧版本的 macOS，Broadwell 及更旧的架构需要 "),r("code",[t._v("AppleCpuPmCfgLock")])])])])])]),t._v(" "),r("li",[t._v("此外，你也可以选择关闭 CFG Lock: "),r("a",{attrs:{href:"https://dortania.github.io/OpenCore-Post-Install/misc/msr-lock.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("关闭 CFG Lock"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("strong",[t._v("AppleXcpmExtraMsrs")]),t._v(" "),r("ul",[r("li",[t._v("可能需要，主要用于奔腾、HEDT 和其他不被 macOS 原生支持的老旧架构.")])])])]),t._v(" "),r("h4",{attrs:{id:"传统-intel-用户"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#传统-intel-用户"}},[t._v("#")]),t._v(" 传统 Intel 用户")]),t._v(" "),r("p",[t._v("对于 macOS Big Sur, 许多固件在确定 CPU 核心数量上存在问题，这会导致早期启动错误和内核崩溃。从串口输出中，你可以看到崩溃信息：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("max_cpus_from_firmware not yet initialized\n")])])]),r("p",[t._v("解决办法：")]),t._v(" "),r("ul",[r("li",[t._v("启用位于 Booter -> Quirks 的 "),r("code",[t._v("AvoidRuntimeDefrag")]),t._v(" "),r("ul",[r("li",[t._v("对大多数主板固件都有效")])])])]),t._v(" "),r("p",[t._v("但在一些特别的机器如 HP Compaq DC 7900 上，即使启用了这个设置项，它们的固件依然会导致内核崩溃。所以我们要强制指定 CPU 核心数量。只有在 "),r("code",[t._v("AvoidRuntimeDefrag")]),t._v(" 失效时才应该使用以下补丁：")]),t._v(" "),r("details",{staticClass:"custom-block details"},[r("summary",[t._v("传统 CPU 核心数量补丁")]),t._v(" "),r("p",[t._v("添加以下补丁（将 B8 04 00 00 00 C3 中的 "),r("strong",[t._v("04")]),t._v(" 更换为你硬件支持的 CPU 线程数\n目）")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"left"}},[t._v("Key")]),t._v(" "),r("th",{staticStyle:{"text-align":"left"}},[t._v("Type")]),t._v(" "),r("th",{staticStyle:{"text-align":"left"}},[t._v("Value")])])]),t._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Base")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("_acpi_count_enabled_logical_processors")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Count")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Integer")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("1")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Enabled")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("True")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Find")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Data")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Identifier")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Kernel")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Limit")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Integer")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("0")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Mask")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Data")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("MaxKernel")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("MinKernel")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("20.0.0")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Replace")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Data")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("B804000000C3")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("ReplaceMask")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Data")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Skip")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Integer")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("0")])])])])]),t._v(" "),r("h3",{attrs:{id:"uefi-配置问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#uefi-配置问题"}},[t._v("#")]),t._v(" UEFI 配置问题")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("ProvideConsoleGop")]),t._v(" "),r("ul",[r("li",[t._v("这个设置项用于过渡到下一个界面。这起初是 AptioMemoryFix 的一部分，但现在已经合并到 OpenCore，位于 "),r("code",[t._v("config.plist -> UEFI-> Output")])]),t._v(" "),r("li",[t._v("从 0.5.6 版本开始，"),r("code",[t._v("sample.plist")]),t._v(" 中的这个开关默认是被启用的")])])]),t._v(" "),r("li",[r("strong",[t._v("IgnoreInvalidFlexRatio")]),t._v(" "),r("ul",[r("li",[t._v("Broadwell 和更老的平台需要。"),r("strong",[t._v("不适用于 AMD 或 Intel Skylake 及更新的平台")])])])])]),t._v(" "),r("h3",{attrs:{id:"虚拟机问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机问题"}},[t._v("#")]),t._v(" 虚拟机问题")]),t._v(" "),r("ul",[r("li",[t._v("已知 VMWare 15 会卡在 "),r("code",[t._v("[EB|#LOG:EXITBS:START]")]),t._v("，VMWare 16 修复了这个问题。")])]),t._v(" "),r("h2",{attrs:{id:"卡在-endrandomseed"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-endrandomseed"}},[t._v("#")]),t._v(" 卡在 EndRandomSeed")]),t._v(" "),r("p",[t._v("和上文提到过的问题一致: "),r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-eb-log-exitbs-start"}},[t._v("卡在 [EB|#LOG:EXITBS:START]")])]),t._v(" "),r("h2",{attrs:{id:"在-opencore-中选择-macos-分区后卡住"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在-opencore-中选择-macos-分区后卡住"}},[t._v("#")]),t._v(" 在 OpenCore 中选择 macOS 分区后卡住")]),t._v(" "),r("p",[t._v("和上文提到过的问题一致: "),r("a",{attrs:{href:"#%E5%8D%A1%E5%9C%A8-eb-log-exitbs-start"}},[t._v("卡在 [EB|#LOG:EXITBS:START]")])]),t._v(" "),r("ul",[r("li",[t._v("注: 使用 "),r("RouterLink",{attrs:{to:"/troubleshooting/debug.html"}},[t._v("DEBUG 版本的 OpenCore")]),t._v(" 可以让你更加轻松地发现问题的原因")],1)]),t._v(" "),r("h2",{attrs:{id:"内核崩溃-invalid-frame-pointer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核崩溃-invalid-frame-pointer"}},[t._v("#")]),t._v(" 内核崩溃：Invalid frame pointer")]),t._v(" "),r("p",[t._v("这个问题和 "),r("code",[t._v("Booter -> Quirks")]),t._v(" 的配置有关，请您检查这些项：")]),t._v(" "),r("ul",[r("li",[r("p",[r("strong",[t._v("DevirtualiseMmio")])]),t._v(" "),r("ul",[r("li",[t._v("某些特定的 MMIO 区域仍然需要正常工作，因此您需要在 "),r("code",[t._v("Booter -> MmioWhitelist")]),t._v(" 中排除这些区域，或者直接禁用这个开关。 详情请参考: "),r("RouterLink",{attrs:{to:"/extras/kaslr-fix.html#using-devirtualisemmio"}},[t._v("如何使用 DevirtualiseMmio")])],1),t._v(" "),r("li",[t._v("对于 TRx40 用户，启用这个设置项")]),t._v(" "),r("li",[t._v("对于 X99 用户，因为一些固件会使其失效，所以请禁用这个设置项")])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("SetupVirtualMap")])]),t._v(" "),r("ul",[r("li",[t._v("在大多数固件都需要启用这个设置项，如果禁用它很容易会导致内核崩溃, 除了以下情况：\n"),r("ul",[r("li",[t._v("主要是 Z390 以及更早的主板需要启用这个开关")]),t._v(" "),r("li",[t._v("然而，某些固件（主要出现在 2020 年后的新产品）与该设置项不兼容，启用这个设置项反而会导致内核崩溃，如果您拥有以下机器或主板，请禁用此设置项：\n"),r("ul",[r("li",[t._v("Intel Ice Lake 架构笔记本")]),t._v(" "),r("li",[t._v("Intel Comet Lake 架构主板（B460、H470、Z490 等）")]),t._v(" "),r("li",[t._v("AMD 的 B550 和 A520（更新了最新版本的 BIOS 的 X570 主板也包括在内）\n"),r("ul",[r("li",[t._v("许多带有 2020 年底 BIOS 更新的 B450 和 X470 主板也包括在内")])])]),t._v(" "),r("li",[t._v("AMD TRx40")]),t._v(" "),r("li",[t._v("虚拟机（如：QEMU）")]),t._v(" "),r("li",[t._v("X299 2020+ BIOS 更新（2019 年末或 2020 年后发布的最新 BIOS）")])])])])])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("EnableWriteUnprotector")])]),t._v(" "),r("ul",[r("li",[t._v("另一个原因可能是 macOS 与 CR0 寄存器的写保护相冲突, 我们有两种方法来解决这个问题：\n"),r("ul",[r("li",[t._v("如果您的固件支持 MATs(主要是 2018 年后发布的固件):\n"),r("ul",[r("li",[t._v("EnableWriteUnprotector -> False")]),t._v(" "),r("li",[t._v("RebuildAppleMemoryMap -> True")]),t._v(" "),r("li",[t._v("SyncRuntimePermissions -> True")])])]),t._v(" "),r("li",[t._v("对于发布较早而不支持 MATs 的固件:\n"),r("ul",[r("li",[t._v("EnableWriteUnprotector -> True")]),t._v(" "),r("li",[t._v("RebuildAppleMemoryMap -> False")]),t._v(" "),r("li",[t._v("SyncRuntimePermissions -> False")])])]),t._v(" "),r("li",[t._v("注：一些笔记本电脑（例如：戴尔灵感 5370）即使支持 MATs 但是依然会遇到启动问题。在这种情况下，您将有两种选择：\n"),r("ul",[r("li",[t._v("像不支持 MAT 机器的情况一样处理（启用 "),r("code",[t._v("EnableWriteUnprotector")]),t._v(" 然后禁用 "),r("code",[t._v("RebuildAppleMemoryMap")]),t._v(" 和 "),r("code",[t._v("SyncRuntimePermissions")]),t._v("）")]),t._v(" "),r("li",[t._v("或启用 "),r("code",[t._v("DevirtualiseMmio")]),t._v(" 然后遵循 "),r("a",{attrs:{href:"https://dortania.github.io/OpenCore-Install-Guide/extras/kaslr-fix.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MmioWhitelist 使用向导"),r("OutboundLink")],1)])])])])])])])]),t._v(" "),r("p",[t._v("关于 MATs 支持：使用 EDK 2018 以后版本编译的固件会支持 MAT ，许多 OEM 甚至向基于 SkyLake 架构的笔记本提供了支持 MAT 的固件。但是我们很难去知晓 OEM 是否更新了固件，您可以检查 OpenCore 日志来确定您的固件是否支持 MAT（"),r("RouterLink",{attrs:{to:"/troubleshooting/debug.html"}},[t._v("如何获取 OpenCore 调试日志")]),t._v("）：")],1),t._v(" "),r("div",{staticClass:"language-Shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[t._v("OCABC: MAT support is "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),r("ul",[r("li",[t._v("注意: 输出为 "),r("code",[t._v("1")]),t._v(" 意味着固件支持 MATs，如果是 "),r("code",[t._v("0")]),t._v(" 则意味着不支持")])]),t._v(" "),r("h2",{attrs:{id:"启动-preboot-分区时卡在-eb-ld-ofs-err-0xe"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#启动-preboot-分区时卡在-eb-ld-ofs-err-0xe"}},[t._v("#")]),t._v(" 启动 Preboot 分区时卡在 "),r("code",[t._v("[EB|LD:OFS] Err(0xE)")])]),t._v(" "),r("p",[t._v("完整的错误:")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("EB"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("`LD:OFS"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Err"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0xE"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" @ OPEN "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("System"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Library"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PrelinkedKernels"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("prelinkedkernel"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("p",[t._v("这是由于 preboot 分区没有被正确地更新，你需要进入到 Recovery 来修复它：")]),t._v(" "),r("ol",[r("li",[t._v("启用位于 "),r("code",[t._v("UEFI -> APFS")]),t._v(" 的 "),r("code",[t._v("JumpstartHotplug")]),t._v(" （如果没有启用这个设置项， macOS Big Sur 的 Recovery 可能无法启动）")]),t._v(" "),r("li",[t._v("启动进入 macOS Recovery")]),t._v(" "),r("li",[t._v("打开终端，按照如下操作:")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 首先，找出您的 Preboot 分区")]),t._v("\ndiskutil list\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从下表可以看出，Preboot 分区的标识符（Identifier）是 disk5s2")]),t._v("\n/dev/disk5 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("synthesized"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n   "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#:                       TYPE NAME                    SIZE       IDENTIFIER")]),t._v("\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":      APFS Container Scheme -                      +255.7 GB   disk5\n                                 Physical Store disk4s2\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(":                APFS Volume ⁨Big Sur HD - Data⁩       "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("122.5")]),t._v(" GB   disk5s1\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(":                APFS Volume ⁨Preboot⁩                 "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("309.4")]),t._v(" MB   disk5s2\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":                APFS Volume ⁨Recovery⁩                "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("887.8")]),t._v(" MB   disk5s3\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(":                APFS Volume ⁨VM⁩                      "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(" MB     disk5s4\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(":                APFS Volume ⁨Big Sur HD⁩              "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.2")]),t._v(" GB    disk5s5\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(":              APFS Snapshot ⁨com.apple.os.update-"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".⁩ "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.2")]),t._v(" GB    disk5s5s\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 现在挂载 Preboot 分区")]),t._v("\ndiskutil "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" disk5s2\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 接下来执行 updatePreboot 命令")]),t._v("\ndiskutil apfs updatePreboot /volume/disk5s2\n")])])]),r("p",[t._v("最后，请重启您的机器")]),t._v(" "),r("h2",{attrs:{id:"卡在-ocb-loadimage-failed-security-violation"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-ocb-loadimage-failed-security-violation"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("OCB: LoadImage failed - Security Violation")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("OCSB: No suitable signature - Security Violation\nOCB: Apple Secure Boot prohibits this boot entry, enforcing"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nOCB: LoadImage failed - Security Violation\n")])])]),r("p",[t._v("这是因为 Preboot 分区里缺少或使用了过时的 Apple 安全启动清单（Secure Boot manifests），同时如果您为 "),r("code",[t._v("SecureBootModel")]),t._v(" 设定了有效的值，就会导致启动加载失败。这些清单的缺失实际上是 macOS 的一个 Bug")]),t._v(" "),r("p",[t._v("我们有以下方法来解决这个问题:")]),t._v(" "),r("ul",[r("li",[t._v("禁用 SecureBootModel\n"),r("ul",[r("li",[t._v("将 "),r("code",[t._v("Misc -> Secuirty -> SecureBootModel")]),t._v(" 设为 "),r("code",[t._v("Disabled")])])])]),t._v(" "),r("li",[t._v("重新安装 macOS")]),t._v(" "),r("li",[t._v("或将 "),r("code",[t._v("/usr/standalone/i386")]),t._v(" 的安全启动清单（Secure Boot manifests）复制到  "),r("code",[t._v("/Volumes/Preboot/<UUID>/System/Library/CoreServices")]),t._v(" "),r("ul",[r("li",[t._v("由于 Preboot 分区不容易通过“访达”编辑，您需要通过终端完成此操作：")])])])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 首先，找出 Preboot 分区")]),t._v("\ndiskutil list\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从下表可以看出 Preboot 的标识符（IDENTIFIER）为 disk5s2")]),t._v("\n/dev/disk5 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("synthesized"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n   "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#:                       TYPE NAME                    SIZE       IDENTIFIER")]),t._v("\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":      APFS Container Scheme -                      +255.7 GB   disk5\n                                 Physical Store disk4s2\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(":                APFS Volume ⁨Big Sur HD - Data⁩       "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("122.5")]),t._v(" GB   disk5s1\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(":                APFS Volume ⁨Preboot⁩                 "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("309.4")]),t._v(" MB   disk5s2\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":                APFS Volume ⁨Recovery⁩                "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("887.8")]),t._v(" MB   disk5s3\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(":                APFS Volume ⁨VM⁩                      "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(" MB     disk5s4\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(":                APFS Volume ⁨Big Sur HD⁩              "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.2")]),t._v(" GB    disk5s5\n   "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(":              APFS Snapshot ⁨com.apple.os.update-"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".⁩ "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.2")]),t._v(" GB    disk5s5s\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 现在挂载 Preboot 分区")]),t._v("\ndiskutil "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" disk5s2\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CD 进入 Preboot 分区")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意实际路径是在 /System/Volumes/Preboot")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /System/Volumes/Preboot\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取 UUID")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n 46923F6E-968E-46E9-AC6D-9E6141DF52FD\n CD844C38-1A25-48D5-9388-5D62AA46CFB8\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果出现多个 UUID (如：安装过多个版本的 macOS), 您将需要判断哪一个 UUID 是正确的")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最简单的方法是打印出每个硬盘的 .disk_label.contentDetails")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ./46923F6E-968E-46E9-AC6D-9E6141DF52FD/System/Library/CoreServices/.disk_label.contentDetails\n Big Sur HD%\n\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ./CD844C38-1A25-48D5-9388-5D62AA46CFB8/System/Library/CoreServices/.disk_label.contentDetails\n Catalina HD%\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 然后拷贝安全启动文件")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将下文 CD844C38-1A25-48D5-9388-5D62AA46CFB8 替换为您找到的 UUID ")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -a /usr/standalone/i386/. /System/Volumes/Preboot/CD844C38-1A25-48D5-9388-5D62AA46CFB8/System/Library/CoreServices\n")])])]),r("h2",{attrs:{id:"卡在-ocabc-memory-pool-allocation-failure-not-found"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-ocabc-memory-pool-allocation-failure-not-found"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("OCABC: Memory pool allocation failure - Not Found")])]),t._v(" "),r("p",[t._v("这通常是由错误的 BIOS 设定导致的:")]),t._v(" "),r("ul",[r("li",[t._v("请启用 "),r("code",[t._v("Above4GDecoding")])]),t._v(" "),r("li",[t._v("禁用 "),r("code",[t._v("CSM")]),t._v(" 兼容性模块(某些主板上也可以选择启用 "),r("code",[t._v("Windows8.1/10 WHQL")]),t._v(" 模式)\n"),r("ul",[r("li",[t._v("需要注意的是，有些笔记本必须启用 "),r("code",[t._v("CSM")])])])]),t._v(" "),r("li",[t._v("更新 BIOS 到最新版本（Z390 和 HEDT 以固件编写不良而闻名）")])]),t._v(" "),r("h2",{attrs:{id:"卡在-buffer-too-small"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-buffer-too-small"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("Buffer Too Small")])]),t._v(" "),r("ul",[r("li",[t._v("请启用 BIOS 设置中的 "),r("code",[t._v("Above4GDecoding")])])]),t._v(" "),r("h2",{attrs:{id:"卡在-plist-only-kext-has-cfbundleexecutable-key"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-plist-only-kext-has-cfbundleexecutable-key"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("Plist only kext has CFBundleExecutable key")])]),t._v(" "),r("p",[t._v("这是由于 config.plist 中缺失或配置了错误的 Kext 可执行文件路径，可以使用\nProperTree 快照添加 (Cmd/Ctrl+R) 来修复")]),t._v(" "),r("h2",{attrs:{id:"卡在-this-version-of-mac-os-x-is-not-supported-reason-mac"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-this-version-of-mac-os-x-is-not-supported-reason-mac"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("This version of Mac OS X is not supported: Reason Mac...")])]),t._v(" "),r("p",[t._v("这个错误是由于当前设置的 SMBIOS 机型与将要安装的 macOS 版本不兼容。请您确\n认 "),r("code",[t._v("PlatformInfo -> Generic")]),t._v(" 中填写了合适的机型信息，并勾选了 "),r("code",[t._v("Automatic")])]),t._v(" "),r("p",[t._v("如果您想查询完整的 SMBIOS 列表和 macOS 系统支持详情，请访问："),r("RouterLink",{attrs:{to:"/extras/smbios-support.html"}},[t._v("Choosing the right SMBIOS")])],1),t._v(" "),r("details",{staticClass:"custom-block details"},[r("summary",[t._v("macOS 10.15 Catalina 支持的 SMBIOS")]),t._v(" "),r("ul",[r("li",[t._v("iMac13,x+")]),t._v(" "),r("li",[t._v("iMacPro1,1")]),t._v(" "),r("li",[t._v("MacPro6,1+")]),t._v(" "),r("li",[t._v("Macmini6,x+")]),t._v(" "),r("li",[t._v("MacBook8,1+")]),t._v(" "),r("li",[t._v("MacBookAir5,x+")]),t._v(" "),r("li",[t._v("MacBookPro9,x+")])])]),t._v(" "),r("details",{staticClass:"custom-block details"},[r("summary",[t._v("macOS 11 Big Sur 支持的 SMBIOS")]),t._v(" "),r("ul",[r("li",[t._v("iMac14,4+")]),t._v(" "),r("li",[t._v("iMacPro1,1")]),t._v(" "),r("li",[t._v("MacPro6,1+")]),t._v(" "),r("li",[t._v("Macmini7,1+")]),t._v(" "),r("li",[t._v("MacBook8,1+")]),t._v(" "),r("li",[t._v("MacBookAir6,x+")]),t._v(" "),r("li",[t._v("MacBookPro11,x+")])])]),t._v(" "),r("h2",{attrs:{id:"couldn-t-allocate-runtime-area-错误"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#couldn-t-allocate-runtime-area-错误"}},[t._v("#")]),t._v(" "),r("code",[t._v("Couldn't allocate runtime area")]),t._v(" 错误")]),t._v(" "),r("p",[t._v("请参考 "),r("RouterLink",{attrs:{to:"/extras/kaslr-fix.html"}},[t._v("修复 KASLR slide 值")])],1),t._v(" "),r("h2",{attrs:{id:"卡在-rtc-pci-configuration-begins-previous-shutdown-hpet-hid-legacy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-rtc-pci-configuration-begins-previous-shutdown-hpet-hid-legacy"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("RTC...")]),t._v(", "),r("code",[t._v("PCI Configuration Begins")]),t._v(", "),r("code",[t._v("Previous Shutdown...")]),t._v(", "),r("code",[t._v("HPET")]),t._v(", "),r("code",[t._v("HID: Legacy...")])]),t._v(" "),r("p",[t._v("这是 PCI 设备在初始化和配置的过程，也是大多数启动问题会出现的时候。其他可能的卡住位置：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("apfs_module_start...")]),t._v(",")]),t._v(" "),r("li",[r("code",[t._v("Waiting for Root device")]),t._v(",")]),t._v(" "),r("li",[r("code",[t._v("Waiting on...IOResources...")]),t._v(",")]),t._v(" "),r("li",[r("code",[t._v("previous shutdown cause...")])])]),t._v(" "),r("p",[t._v("请检查以下内容:")]),t._v(" "),r("ul",[r("li",[r("p",[r("strong",[t._v("缺少 EC 补丁")]),t._v(":")]),t._v(" "),r("ul",[r("li",[t._v("确保 "),r("code",[t._v("EFI/OC/ACPI")]),t._v(" 里有 "),r("code",[t._v("SSDT-EC.aml")]),t._v(" 并检查 config.plist 的 "),r("code",[t._v("ACPI -> Add")]),t._v(" 中"),r("strong",[t._v("是否被启用")])]),t._v(" "),r("li",[t._v("如果您找不到这个补丁，可以从这里获取："),r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ACPI 入门"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("IRQ 冲突")]),t._v(":")]),t._v(" "),r("ul",[r("li",[t._v("在老旧的笔记本电脑和机器上最常见，可以运行 SSDTTime 的 FixHPET 选项，并将生成的 "),r("code",[t._v("SSDT-HPET.aml")]),t._v(" 和 ACPI 重命名补丁添加到您的配置中（如果缺少 ACPI 重命名补丁，SSDT 将无法工作）")])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("PCI 分配问题")]),t._v(":")]),t._v(" "),r("ul",[r("li",[t._v("更新您的 BIOS 固件并确保它是最新版本。一些 OEM 的固件的 PCI 分配存在问题，特别是 AMD")]),t._v(" "),r("li",[t._v("请启用 BIOS 设定中的 "),r("code",[t._v("Above4GDecoding")]),t._v("。如果找不到可用的选项，则在\nboot-args 中添加 "),r("code",[t._v("npci=0x2000")]),t._v(" "),r("ul",[r("li",[t._v("一些 X99 和 X299 主板（如：GA-X299-UD4）可能需要同时添加 "),r("code",[t._v("npci=0x200")]),t._v(" 启动参数和启用 "),r("code",[t._v("Above4G Decoding")])]),t._v(" "),r("li",[t._v("AMD CPU 请注意: "),r("strong",[t._v("不要在启用 "),r("code",[t._v("Above4G Decoding")]),t._v(" 的同时添加 "),r("code",[t._v("npci=0x2000")]),t._v(" 到 boot-args，它们会互相冲突")])])])]),t._v(" "),r("li",[t._v("一些重要的 BIOS 设定: 禁用 CSM、启用 Windows 8.1/10 UEFI 模式")])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("NVMe 或 SATA 问题")]),t._v(":")]),t._v(" "),r("ul",[r("li",[t._v("有时候使用糟糕的 SATA 控制器或不受支持的 NVMe 驱动器会让你卡在这里。部分已知解决办法：\n"),r("ul",[r("li",[t._v("请不要使用 "),r("code",[t._v("Samsung PM981")]),t._v(" 或 "),r("code",[t._v("Mircon 2200S NVMe SSD")])]),t._v(" "),r("li",[t._v("请将 "),r("code",[t._v("Samsung 970 Evo Plus")]),t._v(" 的固件更新至最新版本（旧版本的固件存在不稳定和失速的问题，详情"),r("a",{attrs:{href:"https://www.samsung.com/semiconductor/minisite/ssd/download/tools/",target:"_blank",rel:"noopener noreferrer"}},[t._v("请查阅此处"),r("OutboundLink")],1),t._v(")")]),t._v(" "),r("li",[t._v("请在 BIOS 设定中禁用 SATA 热插拔（在基于 AMD CPU 的机器上更容易导致问题)")]),t._v(" "),r("li",[t._v("确保您的 NVMe 驱动器在 BIOS 设定中被设置为工作在 NVMe 模式（一些 BIOS 会错误地将 NVMe 驱动器设置为 SATA 模式）")])])])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("NVRAM 写入失败")]),t._v(":")]),t._v(" "),r("ul",[r("li",[t._v("常见于 HEDT 和 300 系主板，以下为解决办法：\n"),r("ul",[r("li",[t._v("300 系消费级 Intel 主板：添加 "),r("code",[t._v("SSDT-PMC.aml")]),t._v("，查阅 "),r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ACPI入门"),r("OutboundLink")],1),t._v(" 来获取 SSDT-PMC.aml")]),t._v(" "),r("li",[t._v("HEDT（如： X99）： See "),r("a",{attrs:{href:"https://dortania.github.io/OpenCore-Post-Install/misc/nvram.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Emulating NVRAM"),r("OutboundLink")],1),t._v(" on how to stop NVRAM write, note that for install you do not need to run the script. Just setup the config.plist")])])])])]),t._v(" "),r("li",[r("p",[r("strong",[t._v("缺失 RTC 时钟")]),t._v(":")]),t._v(" "),r("ul",[r("li",[t._v("Intel 300 系以后的主板（如： Z370, Z490）默认禁用 RTC 时钟。查阅 "),r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ACPI 入门"),r("OutboundLink")],1),t._v(" 来获取 "),r("code",[t._v("SSDT-AWAC.aml")])]),t._v(" "),r("li",[t._v("X99 和 X299 主板的 RTC 设备基本都是损坏的, 您需要 SSDT-RTC0-RANGE 来修复它。 查询 "),r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ACPI 入门"),r("OutboundLink")],1),t._v(" 来获取相关文件")]),t._v(" "),r("li",[t._v("HP 的一些的固件甚至禁用了 RTC ，也没有办法来重新启用它\n"),r("ul",[r("li",[t._v("已知受影响的机型：HP 15-DA0014dx、HP 250 G6")]),t._v(" "),r("li",[t._v("对于拥有这些机器的用户来说，您将需要创建一个仿冒的 RTC 时钟供 macOS 使用。更多详情请查看 ACPI 入门，或者查看下面的图片")])])])])])]),t._v(" "),r("p",[t._v("图例：被禁用而且无法被重新启用的 RTC 时钟（注意到这里没有用于重新启用它的值 "),r("code",[t._v("STAS")]),t._v("）：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(550),alt:"rtc"}})]),t._v(" "),r("h2",{attrs:{id:"b550-主板卡在-acpi-table-loading"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#b550-主板卡在-acpi-table-loading"}},[t._v("#")]),t._v(" B550 主板卡在 "),r("code",[t._v("ACPI table loading")])]),t._v(" "),r("p",[r("img",{attrs:{src:a(551),alt:"ctlna"}})]),t._v(" "),r("p",[t._v("如果使用 B550 或 A520 主板在启动 macOS 时会卡在 "),r("code",[t._v("ACPI table loading")]),t._v("，请使用 "),r("a",{attrs:{href:"https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/compiled/SSDT-CPUR.aml",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSDT-CPUR.aml"),r("OutboundLink")],1),t._v(" 来修复这个问题")]),t._v(" "),r("p",[t._v("确保 SSDT 被正确添加到 "),r("code",[t._v("EFI/OC/ACPI")]),t._v(" 和 "),r("code",[t._v("config.plist -> ACPI -> Add")]),t._v(" 下（ProperTree 的 "),r("code",[t._v("快照添加")]),t._v(" 可以帮助您正确填写 config.plist）")]),t._v(" "),r("h2",{attrs:{id:"waiting-for-root-device-和禁止符号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#waiting-for-root-device-和禁止符号"}},[t._v("#")]),t._v(" "),r("code",[t._v("Waiting for Root Device")]),t._v(" 和禁止符号")]),t._v(" "),r("ul",[r("li",[t._v("其他名称: 停止符号、花屏、禁行")])]),t._v(" "),r("p",[t._v("这主要是 USB 或 SATA 相关的问题，有许多方法来修复这些问题：")]),t._v(" "),r("h3",{attrs:{id:"usb-问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#usb-问题"}},[t._v("#")]),t._v(" USB 问题")]),t._v(" "),r("p",[t._v("现在假设您是在尝试从 USB 启动 macOS 安装器，而不是启动 macOS 系统本身")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("如果您的机器达到了 15 个 USB 端口上限, 你可以启用 "),r("code",[t._v("XhciPortLimit")]),t._v(" 来规避这个问题，但不推荐长期使用。您应该进行 "),r("a",{attrs:{href:"https://dortania.github.io/OpenCore-Post-Install/usb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("USB 端口定制"),r("OutboundLink")],1)]),t._v(" "),r("ul",[r("li",[r("code",[t._v("Kernel -> Quirks -> XhciPortLimit")]),t._v(" 设为 "),r("code",[t._v("True")])])])]),t._v(" "),r("li",[r("p",[t._v("另一个原因可能是固件不能正确传递 USB ownership 给 macOS")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("UEFI -> Quirks -> ReleaseUsbOwnership")]),t._v(" 设为 "),r("code",[t._v("True")])]),t._v(" "),r("li",[t._v("在 BIOS 设定中启用 "),r("code",[t._v("XHCI Handoff")]),t._v(" 也能修复这个问题")])])]),t._v(" "),r("li",[r("p",[t._v("有时候，当 USB 插到了 3.x 接口时启动会遇到这个问题，将其接入 2.0 接口就能避免这个问题")])]),t._v(" "),r("li",[r("p",[t._v("对于 AMD 15h 和 16h CPU，你可能需要以下扩展驱动：")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://cdn.discordapp.com/attachments/566705665616117760/566728101292408877/XLNCUSBFix.kext.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("XLNCUSBFix.kext"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("p",[t._v("如果 "),r("code",[t._v("XLNCUSBFix.kext")]),t._v(" 不起作用，再尝试以下方法:")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://cdn.discordapp.com/attachments/249992304503291905/355235241645965312/StopSign-fixv5.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("AMD StopSign-fixv5"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("p",[t._v("X299 主板：启用 "),r("code",[t._v("Above4G Decoding")])]),t._v(" "),r("ul",[r("li",[t._v("一些 X299 的老旧固件存在 bug，无法正常通过 USB 启动")])])]),t._v(" "),r("li",[r("p",[t._v("ACPI 表缺失 USB 接口内容：")]),t._v(" "),r("ul",[r("li",[t._v("对于 Intel Coffee Lake 及更早的架构，推荐使用 "),r("a",{attrs:{href:"https://bitbucket.org/RehabMan/os-x-usb-inject-all/downloads/",target:"_blank",rel:"noopener noreferrer"}},[t._v("USBInjectAll"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("对于 Intel Ice Lake 和 Comet Lake 架构，推荐使用 "),r("a",{attrs:{href:"https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/compiled/SSDT-RHUB.aml",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSDT-RHUB"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[t._v("SSDTTime 的 "),r("code",[t._v("7. USB Reset")]),t._v(" 选项也能生成 SSDT-RHUB")])])]),t._v(" "),r("li",[t._v("对于 AMD，使用 SSDTTime 的 "),r("code",[t._v("7. USB Reset")]),t._v(" 选项来生成 SSDT-RHUB")])])])]),t._v(" "),r("h3",{attrs:{id:"sata-问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sata-问题"}},[t._v("#")]),t._v(" SATA 问题")]),t._v(" "),r("p",[t._v("在少数情况下（笔记本居多），主板的 SATA 控制器不被 macOS 所支持。为解决这个问题，请确认以下内容：")]),t._v(" "),r("ul",[r("li",[t._v("在 BIOS 设定中将 SATA 控制器设置为 AHCI 模式\n"),r("ul",[r("li",[t._v("macOS 不支持 RAID 或者 IDE 模式")]),t._v(" "),r("li",[t._v("使用英特尔快速存储技术（Intel Rapid Storage Technology，简称 RST，Windows 或 Linux 下使用的一种软 RAID）的硬盘将无法在 macOS 访问")])])]),t._v(" "),r("li",[t._v("使用 "),r("a",{attrs:{href:"https://github.com/khronokernel/Legacy-Kexts/blob/master/Injectors/Zip/SATA-unsupported.kext.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("SATA-unsupported.kext"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[t._v("为不原生支持的 SATA 控制器提供支持，这个问题在笔记本上更常见")]),t._v(" "),r("li",[t._v("对于一些传统的 SATA 控制器，使用 "),r("a",{attrs:{href:"https://www.insanelymac.com/forum/files/file/436-ahciportinjectorkext/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AHCIPortInjector.kext"),r("OutboundLink")],1),t._v(" 可能更合适")])])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/dortania/OpenCore-Install-Guide/blob/master/extra-files/CtlnaAHCIPort.kext.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("从 Catalina 提取并修改后的 AppleAHCIPort.kext"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[t._v("适用于安装 macOS Big Sur 11 的用户，这实际上是把 Catalina 能正常使用的 kext 向后移植到了 Big Sur。无需和 "),r("code",[t._v("SATA-unsupported.kext")]),t._v(" 一起使用")])])])]),t._v(" "),r("p",[t._v("要注意的是，您只有在安装 macOS 到硬盘后才会遇到这些问题。SATA 问题不会对启动 macOS 安装器造成影响")]),t._v(" "),r("h2",{attrs:{id:"x99-主板在-iopcifamily-发生内核崩溃"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#x99-主板在-iopcifamily-发生内核崩溃"}},[t._v("#")]),t._v(" X99 主板在 IOPCIFamily 发生内核崩溃")]),t._v(" "),r("p",[t._v("对于这些使用 X99 主板的用户，请遵循以下解决办法：")]),t._v(" "),r("ul",[r("li",[t._v("请确保以下 Kernel设置项被启用:\n"),r("ul",[r("li",[r("code",[t._v("AppleCpuPmCfgLock")])]),t._v(" "),r("li",[r("code",[t._v("AppleXcpmCfgLock")])]),t._v(" "),r("li",[r("code",[t._v("AppleXcpmExtraMsrs")])])])]),t._v(" "),r("li",[t._v("请确保您的引导拥有以下 SSDT：\n"),r("ul",[r("li",[t._v("SSDT-UNC（如果没有，从 "),r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ACPI 入门"),r("OutboundLink")],1),t._v(" 获取一个）")])])])]),t._v(" "),r("h2",{attrs:{id:"卡在-ioconsoleusers-gioscreenlock-giolockstate-3-或附近"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-ioconsoleusers-gioscreenlock-giolockstate-3-或附近"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("IOConsoleUsers: gIOScreenLock...")]),t._v("/"),r("code",[t._v("gIOLockState (3...")]),t._v(" 或附近")]),t._v(" "),r("p",[t._v("这个问题发生的位置是 GPU 初始化之前，请确保:")]),t._v(" "),r("ul",[r("li",[t._v("GPU 支持 UEFI (GTX 7XX/2013+)")]),t._v(" "),r("li",[t._v("CSM 已经被关闭\n"),r("ul",[r("li",[t._v("但在一些笔记本上可能需要被启用")])])]),t._v(" "),r("li",[t._v("强制 PCIe 3.0 连接速度")]),t._v(" "),r("li",[t._v("如果有核显，检查是否使用了正确的 "),r("code",[t._v("ig-platform-id")]),t._v(" 和 "),r("code",[t._v("device-id")]),t._v(" "),r("ul",[r("li",[t._v("桌面端 UHD630 可能需要使用 "),r("code",[t._v("00009B3E")]),t._v(" 来代替")])])]),t._v(" "),r("li",[t._v("使用不同的 "),r("a",{attrs:{href:"https://github.com/acidanthera/WhateverGreen/blob/master/Manual/FAQ.IntelHD.en.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("WhateverGreen 补丁"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[t._v("如 "),r("code",[t._v("-igfxmlr")]),t._v(' 启动参数。 这可能适用于显示为 "Divide by Zero" 的错误')])])]),t._v(" "),r("li",[t._v("当启动 macOS 10.15.4 或更新版本，Coffee Lake 的核芯显卡可能还需要 "),r("code",[t._v("igfxonln=1")])])]),t._v(" "),r("h2",{attrs:{id:"笔记本花屏问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#笔记本花屏问题"}},[t._v("#")]),t._v(" 笔记本花屏问题")]),t._v(" "),r("p",[t._v('请在 UEFI 设定启用 CSM。该选项可能会出现在 "Boot legacy ROMs" 或其他的启动设置下')]),t._v(" "),r("h2",{attrs:{id:"采用-navi-核心的-amd-显卡在出现-ioconsoleusers-gioscreenlock-之后黑屏"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#采用-navi-核心的-amd-显卡在出现-ioconsoleusers-gioscreenlock-之后黑屏"}},[t._v("#")]),t._v(" 采用 Navi 核心的 AMD 显卡在出现 IOConsoleUsers: gIOScreenLock... 之后黑屏")]),t._v(" "),r("ul",[r("li",[t._v("添加 "),r("code",[t._v("agdpmod=pikera")]),t._v(" 到 boot-args，并关闭 BIOS 中的 "),r("code",[t._v("Serial/COM Port")]),t._v("（位于 SuperIO）")]),t._v(" "),r("li",[t._v("切换不同的显示输出")]),t._v(" "),r("li",[t._v("尝试 "),r("code",[t._v("MacPro7,1")]),t._v(" SMBIOS 并且使用 boot-arg "),r("code",[t._v("agdpmod=ignore")])])]),t._v(" "),r("p",[t._v("对于微星 Navi 核心显卡用户, 你需要添加如下补丁: "),r("a",{attrs:{href:"https://github.com/acidanthera/bugtracker/issues/901",target:"_blank",rel:"noopener noreferrer"}},[t._v("Installer not working with 5700XT #901"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("向 "),r("code",[t._v("Kernel -> Patch")]),t._v(" 添加以下内容：")]),t._v(" "),r("details",{staticClass:"custom-block details"},[r("summary",[t._v("微星 Navi 核心显卡补丁")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("Base:\nComment: Navi VBIOS Bug Patch\nCount: "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nEnabled: YES\nFind: 4154592C526F6D2300\nIdentifier: com.apple.kext.AMDRadeonX6000Framebuffer\nLimit: "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nMask:\nMinKernel: "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.00")]),t._v(".00\nMaxKernel: "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.99")]),t._v(".99\nReplace: 414D442C526F6D2300\nReplaceMask:\nSkip: "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])])]),t._v(" "),r("p",[t._v("注：macOS 11 Big Sur 不再需要此补丁")]),t._v(" "),r("h2",{attrs:{id:"内核崩溃-cannot-perform-kext-summary"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核崩溃-cannot-perform-kext-summary"}},[t._v("#")]),t._v(" 内核崩溃 "),r("code",[t._v("Cannot perform kext summary")])]),t._v(" "),r("p",[t._v("通常在预连接内核时见到，特别是在 macOS 加载我们注入的 Kext 的时候，请确认：")]),t._v(" "),r("ul",[r("li",[t._v("您的 kexts 是否按照正确的顺序排列（先是主驱动再到插件，Lilu 永远位于其他插件之前)")]),t._v(" "),r("li",[t._v("忘记为带有可执行文件的 Kext 填写二进制文件路径，或错误地为没有可执行文件的 Kext 填写了二进制文件路径（如 "),r("code",[t._v("USBPort.kext")]),t._v(", "),r("code",[t._v("XHCI-unspported.kext")]),t._v(" 没有可执行文件）")]),t._v(" "),r("li",[t._v("不要重复添加相同的 kext 到 "),r("code",[t._v("config.plist")]),t._v("(如： including multiple copies of VoodooInput from multiple kexts, 我们推荐启用顺序在前的那个，然后禁用后面的那个)")])]),t._v(" "),r("p",[t._v("注：这个错误看起来非常像 "),r("a",{attrs:{href:"#%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83invalid-frame-pointer"}},[t._v("内核崩溃：Invalid frame pointer")])]),t._v(" "),r("h2",{attrs:{id:"内核崩溃-appleintelmcereporter"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核崩溃-appleintelmcereporter"}},[t._v("#")]),t._v(" 内核崩溃 "),r("code",[t._v("AppleIntelMCEReporter")])]),t._v(" "),r("p",[t._v("macOS Catalina 对多 CPU 接口的支持存在问题。一个有趣的事实是：一些 AMD 主板的固件会报告存在多个 CPU 接口。添加 "),r("a",{attrs:{href:"https://github.com/acidanthera/bugtracker/files/3703498/AppleMCEReporterDisabler.kext.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("AppleMCEReporterDisabler"),r("OutboundLink")],1),t._v(" 到 "),r("code",[t._v("EFI/OC/Kexts")]),t._v(" 和 "),r("code",[t._v("config.plist -> Kernel -> Add")]),t._v(" 来修复这个问题")]),t._v(" "),r("h2",{attrs:{id:"内核崩溃-appleintelcpupowermanagement"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核崩溃-appleintelcpupowermanagement"}},[t._v("#")]),t._v(" 内核崩溃 "),r("code",[t._v("AppleIntelCPUPowerManagement")])]),t._v(" "),r("p",[t._v("这通常是因为缺失或配置了错误的 "),r("code",[t._v("NullCPUPowerManagement")]),t._v("。请从 "),r("code",[t._v("Kernel -> Add")]),t._v(" 和 "),r("code",[t._v("EFI/OC/Kexts")]),t._v(" 中移除 "),r("code",[t._v("NullCPUPowerManagement")]),t._v("，然后启用 "),r("code",[t._v("Kernel -> Emulate")]),t._v(" 下的 "),r("code",[t._v("DummyPowerManagement")])]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("注意")]),t._v("：对于一些旧版 Intel CPU (如： Penryn 或更早之前的架构)，这可能是由于 IRQ 冲突或者 HPET 设备被禁用所导致。如果要解决这个问题，以下二选一:\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/ssdt-methods/ssdt-easy.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSDTTime 的 FixHPET 选项"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("强制启用 HPET 设备")])])])]),t._v(" "),r("details",{staticClass:"custom-block details"},[r("summary",[t._v("强制启用 HPET 设备")]),t._v(" "),r("p",[t._v("在 ACPI -> Patch:")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"left"}},[t._v("Comment")]),t._v(" "),r("th",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),r("th",{staticStyle:{"text-align":"left"}},[t._v("Force HPET Online")])])]),t._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Enabled")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("YES")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Count")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("0")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Limit")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("0")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Find")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Data")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("A010934F53464C00")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[t._v("Replace")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("Data")]),t._v(" "),r("td",{staticStyle:{"text-align":"left"}},[t._v("A40A0FA3A3A3A3A3")])])])])]),t._v(" "),r("h2",{attrs:{id:"macos-在登录界面冻结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#macos-在登录界面冻结"}},[t._v("#")]),t._v(" macOS 在登录界面冻结")]),t._v(" "),r("p",[t._v("这通常是 TSC 导致的问题, 对大多数机器来说添加 "),r("a",{attrs:{href:"https://github.com/acidanthera/CpuTscSync",target:"_blank",rel:"noopener noreferrer"}},[t._v("CpuTscSync"),r("OutboundLink")],1),t._v(" 即可")]),t._v(" "),r("p",[t._v("以下为常见的情况:")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"center"}},[t._v("情况 1")]),t._v(" "),r("th",{staticStyle:{"text-align":"center"}},[t._v("情况 2")])])]),t._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"center"}},[r("img",{attrs:{src:a(362),alt:"case 1"}})]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[r("img",{attrs:{src:a(363),alt:"case 2"}})])])])]),t._v(" "),r("h2",{attrs:{id:"笔记本电脑的键盘工作正常-但触控板无法工作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#笔记本电脑的键盘工作正常-但触控板无法工作"}},[t._v("#")]),t._v(" 笔记本电脑的键盘工作正常，但触控板无法工作")]),t._v(" "),r("p",[t._v("检查 "),r("code",[t._v("config.plist -> Kernel -> Add")]),t._v(" 请确保 VoodooInput 在 VoodooPS2 和 VoodooI2C 的前面")]),t._v(" "),r("details",{staticClass:"custom-block details"},[r("summary",[t._v("VoodooI2C 故障诊断")]),t._v(" "),r("p",[t._v("需要的文件可在此页面获取："),r("RouterLink",{attrs:{to:"/ktext.html"}},[t._v("获取需要的文件")])],1),t._v(" "),r("p",[t._v("检查内核扩展的加载顺序，让他们符合以下顺序：")]),t._v(" "),r("ol",[r("li",[t._v("VoodooGPIO、VoodooInput 和 VoodooI2CServices 这三者之间可以是任意顺序（这些内核扩展位于 "),r("code",[t._v("VoodooI2C.kext/Contents/PlugIns")]),t._v("）")]),t._v(" "),r("li",[t._v("VoodooI2C.kext")]),t._v(" "),r("li",[t._v("作为插件的内核扩展")])]),t._v(" "),r("p",[t._v("确保 "),r("code",[t._v("SSDT-GPIO")]),t._v(" 存在于 "),r("code",[t._v("EFI/OC/ACPI")]),t._v(" 并在 "),r("code",[t._v("config.plist")]),t._v(" 的 "),r("code",[t._v("ACPI -> Add")]),t._v(" 加载和启用。如果依然存在问题，请查阅 "),r("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/Laptops/trackpad.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ACPI 入门 - GPIO 页面"),r("OutboundLink")],1),t._v(".")])]),t._v(" "),r("h2",{attrs:{id:"kextd-stall-0-appleacpicpu"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kextd-stall-0-appleacpicpu"}},[t._v("#")]),t._v(" "),r("code",[t._v("kextd stall[0]: AppleACPICPU")])]),t._v(" "),r("p",[t._v("这是因为缺失或使用了损坏的 SMC 模拟器，请检查以下内容：")]),t._v(" "),r("ul",[r("li",[t._v("Lilu 和 VirtualSMC 都存在于 "),r("code",[t._v("EFI/OC/kexts")]),t._v(" 和 "),r("code",[t._v("config.plist")])]),t._v(" "),r("li",[t._v("Lilu 应先于 VirtualSMC 加载")]),t._v(" "),r("li",[t._v("最后可以尝试 FakeSMC 来代替 VirtualSMC, "),r("strong",[t._v("不要同时使用 VirtualSMC 和 FakeSMC")])])]),t._v(" "),r("h2",{attrs:{id:"内核崩溃-appleinteli210ethernet"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核崩溃-appleinteli210ethernet"}},[t._v("#")]),t._v(" 内核崩溃 "),r("code",[t._v("AppleIntelI210Ethernet")])]),t._v(" "),r("p",[t._v("对于这些带有 i225-V NIC 网卡的 Comet lake 主板, 您可能会遇到在 i210 kext 发生的内核崩溃。为解决这个问题，确保您配置了正确的以太网卡 PciRoot。一般为以下两者之一：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("PciRoot(0x0)/Pci(0x1C,0x1)/Pci(0x0, 0x0)")]),t._v(" "),r("ul",[r("li",[t._v("默认是这个, 主要在华硕和技嘉的主板上使用")])])]),t._v(" "),r("li",[r("code",[t._v("PciRoot(0x0)/Pci(0x1C,0x4)/Pci(0x0,0x0)")]),t._v(" "),r("ul",[r("li",[t._v("一些 OEM 会用这个来代替")])])])]),t._v(" "),r("p",[t._v("对于这些具有奇怪的 PciRoot 的主板，您首先需要完全安装好 macOS，然后使用 "),r("a",{attrs:{href:"https://github.com/acidanthera/gfxutil/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("gfxutil"),r("OutboundLink")],1),t._v(" 来找出正确的路径:")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("/path/to/gfxutil "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8086:15f3"')]),t._v("\n")])])]),r("p",[t._v("会输出以下内容：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("00:1f.6 8086:15f3 /PC00@0/GBE1@1F,6 = PciRoot(0x0)/Pci(0x1F,0x6)\n")])])]),r("p",[t._v("最后出现的 "),r("code",[t._v("PciRoot(0x0)/Pci(0x1F,0x6)")]),t._v(" 就是您需要添加到 config.plist 的设备路径，同时为其添加属性 "),r("code",[t._v("device-id")]),t._v(" 值为 "),r("code",[t._v("F2150000")]),t._v("（data 类型）")]),t._v(" "),r("h2",{attrs:{id:"icelake-笔记本上的内核崩溃-wrong-cd-clock-frequency"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#icelake-笔记本上的内核崩溃-wrong-cd-clock-frequency"}},[t._v("#")]),t._v(" Icelake 笔记本上的内核崩溃：“Wrong CD Clock Frequency”")]),t._v(" "),r("p",[r("img",{attrs:{src:a(552),alt:"cdc"}})]),t._v(" "),r("p",[t._v("请确保 "),r("code",[t._v("boot-args")]),t._v(" 添加了 "),r("code",[t._v("-igfxcdc")])]),t._v(" "),r("h2",{attrs:{id:"内核崩溃-cckprng-int-gen"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内核崩溃-cckprng-int-gen"}},[t._v("#")]),t._v(" 内核崩溃：“cckprng_int_gen”")]),t._v(" "),r("p",[t._v("完整信息：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cckprng_int_gen: generator has already been sealed"')]),t._v("\n")])])]),r("p",[t._v("原因为二者之一：")]),t._v(" "),r("ul",[r("li",[t._v("缺少 SMC 模拟器（例如：您使用的 config.plist 或 EFI 缺少 VirtualSMC）\n"),r("ul",[r("li",[t._v("添加 "),r("a",{attrs:{href:"https://github.com/acidanthera/VirtualSMC/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("VirtualSMC.kext"),r("OutboundLink")],1),t._v(" 到您的 config.plist 和 EFI 里")])])]),t._v(" "),r("li",[t._v("SSDT-CPUR 的错误使用")])]),t._v(" "),r("p",[t._v("对于后者, 确保你只在 "),r("strong",[t._v("B550 或 A520")]),t._v(" 主板上使用 SSDT-CPUR。不要在 X570 或更旧的主板上使用（如 B450 或 A320）")]),t._v(" "),r("h2",{attrs:{id:"安装-macos-big-sur-时卡在-forcing-cs-runtime-for-entitlement"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-macos-big-sur-时卡在-forcing-cs-runtime-for-entitlement"}},[t._v("#")]),t._v(" 安装 macOS Big Sur 时卡在 "),r("code",[t._v("Forcing CS_RUNTIME for entitlement")])]),t._v(" "),r("p",[r("img",{attrs:{src:a(358),alt:"Credit to Stompy for image"}})]),t._v(" "),r("p",[t._v("这实际上是 macOS 在密封系统分区, 看起来 macOS 像是卡住了，实际上"),r("strong",[t._v("并没有")]),t._v("。"),r("strong",[t._v("请不要重启电脑")]),t._v("，你只需要一些耐心和时间")]),t._v(" "),r("h2",{attrs:{id:"卡在-ramrod"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卡在-ramrod"}},[t._v("#")]),t._v(" 卡在 "),r("code",[t._v("ramrod")]),t._v("(^^^^^^^^^^^^^)")]),t._v(" "),r("p",[r("img",{attrs:{src:a(359),alt:"Credit to Notiflux for image"}})]),t._v(" "),r("p",[t._v("如果卡在 "),r("code",[t._v("ramrod")]),t._v(" 附近（或启动时遇到此错误，然后不断重启、循环），这\n可能表示您使用的 VirtualSMC 出现问题。要解决这个问题，您有 2 种解决方案：")]),t._v(" "),r("ul",[r("li",[t._v("确保您在使用最新版本的 VirtualSMC 和 Lilu，同时添加 "),r("code",[t._v("vsmcgen=1")]),t._v(" 到 "),r("code",[t._v("boot-args")])]),t._v(" "),r("li",[t._v("使用 "),r("a",{attrs:{href:"https://bitbucket.org/RehabMan/os-x-fakesmc-kozlek/downloads/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rehabman 开发的 FakeSMC"),r("OutboundLink")],1),t._v(" 来代替（您可以使用 MinKernel / MaxKernel 将\nFakeSMC 限制在 Big Sur 及更新版本）")])]),t._v(" "),r("p",[t._v("当更换 kexts 时，请确保您的 "),r("code",[t._v("config.plist")]),t._v(" 没有同时启用 FakeSMC 和\nVirtualSMC，否则两者会互相冲突。")])])}),[],!1,null,null,null);e.default=s.exports}}]);